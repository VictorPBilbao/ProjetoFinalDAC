<div class="client-container">
    <h2>Consultar Cliente</h2>

    <div class="search-bar">
        <input
            type="text"
            placeholder="Digite o nome ou CPF do cliente..."
            [(ngModel)]="search"
            (keyup.enter)="findClient()"
        />
        <button (click)="findClient()">Buscar</button>
    </div>

    <div class="feedback-area">
        <div *ngIf="feedbackMessage" class="error-message">
            {{ feedbackMessage }}
        </div>
        <div *ngIf="!foundClient && !feedbackMessage" class="info-message">
            Digite um nome ou CPF para iniciar a busca.
        </div>
    </div>

    <div *ngIf="foundClient" class="details-card">
        <div class="details-section">
            <h3>Dados Pessoais</h3>
            <div class="details-grid">
                <div class="detail-item">
                    <label>Nome Completo</label>
                    <span>{{ foundClient.nome }}</span>
                </div>
                <div class="detail-item">
                    <label>CPF</label>
                    <span>{{ foundClient.cpf | cpf }}</span>
                </div>
                <div class="detail-item">
                    <label>E-mail</label>
                    <span>{{ foundClient.email }}</span>
                </div>
                <div class="detail-item">
                    <label>Telefone</label>
                    <span>{{ foundClient.telefone }}</span>
                </div>
            </div>
        </div>

        <div class="details-section">
            <h3>Endereço</h3>
            <div class="details-grid">
                <div class="detail-item">
                    <label>Logradouro</label>
                    <span
                        >{{ foundClient.endereco.tipo }}
                        {{ foundClient.endereco.logradouro }},
                        {{ foundClient.endereco.numero }}</span
                    >
                </div>
                <div class="detail-item">
                    <label>Cidade / Estado</label>
                    <span
                        >{{ foundClient.endereco.cidade }} /
                        {{ foundClient.endereco.estado }}</span
                    >
                </div>
                <div class="detail-item">
                    <label>CEP</label>
                    <span>{{ foundClient.endereco.cep }}</span>
                </div>
                <div
                    class="detail-item"
                    *ngIf="foundClient.endereco.complemento"
                >
                    <label>Complemento</label>
                    <span>{{ foundClient.endereco.complemento }}</span>
                </div>
            </div>
        </div>

        <div class="details-section">
            <h3>Dados da Conta</h3>
            <div class="details-grid">
                <div class="detail-item">
                    <label>Agência / Conta</label>
                    <span
                        >{{ foundClient.agencia }} /
                        {{ foundClient.conta }}</span
                    >
                </div>
                <div class="detail-item">
                    <label>Salário Declarado</label>
                    <span>{{ foundClient.salario | currency : "BRL" }}</span>
                </div>
                <div class="detail-item">
                    <label>Saldo</label>
                    <span
                        [class.negative]="foundClient.saldo < 0"
                        [class.positive]="foundClient.saldo >= 0"
                    >
                        {{ foundClient.saldo | currency : "BRL" }}
                    </span>
                </div>
                <div class="detail-item">
                    <label>Limite</label>
                    <span class="positive">{{
                        foundClient.limite | currency : "BRL"
                    }}</span>
                </div>
                <div class="detail-item">
                    <label>Gerente</label>
                    <span>{{ foundClient.manager.name }}</span>
                </div>
                <div class="detail-item">
                    <label>Cliente desde</label>
                    <span>{{
                        foundClient.criadoEm | date : "dd/MM/yyyy"
                    }}</span>
                </div>
            </div>
        </div>
    </div>
</div>
